<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analysing survey data with timesaveR • timesaveR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analysing survey data with timesaveR">
<meta property="og:description" content="timesaveR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">timesaveR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">Getting started with timesaveR</a>
    </li>
    <li>
      <a href="../articles/survey-functions.html">Analysing survey data with timesaveR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LukasWallrich/timesaveR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="survey-functions_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Analysing survey data with timesaveR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/LukasWallrich/timesaveR/blob/master/vignettes/survey-functions.Rmd"><code>vignettes/survey-functions.Rmd</code></a></small>
      <div class="hidden name"><code>survey-functions.Rmd</code></div>

    </div>

    
    
<div id="using-survey-weights" class="section level1">
<h1 class="hasAnchor">
<a href="#using-survey-weights" class="anchor"></a>Using survey weights</h1>
<p>Large-scale social surveys often do not aim to recruit random samples, but rather oversample small groups that are of interest for sub-group analyses (e.g., ethnic minorities). In addition, they never quite succeed in recruiting representative samples. To ensure that the results of statistical models approximate population parameters, survey weights need to be used to give each participant a specific weight in analyses. You can find out more in this <a href="https://youtu.be/brxx81U6N1o">brief YouTube video</a> or explore the more <a href="https://www.europeansocialsurvey.org/methodology/ess_methodology/data_processing_archiving/weighting.html">extensive guide to weights in the European Social Survey</a> as an example.</p>
</div>
<div id="survey-weights-in-timesaver" class="section level1">
<h1 class="hasAnchor">
<a href="#survey-weights-in-timesaver" class="anchor"></a>Survey weights in timesaveR</h1>
<p>Many functions in the <code>timesaveR</code> package have alternatives that accept survey objects instead of dataframes. These functions are designated by the <code>svy_</code> prefix. To use them, you will first need to use the <code>srvyr</code> package to create a survey object based on the dataframe.</p>
<p>Below, I show some analyses of the European Social Survey 2014 data using the correct survey weights.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lukaswallrich.github.io/timesaveR/">timesaveR</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://gdfe.co/srvyr/">srvyr</a></span><span class="op">)</span>

<span class="co">#Create weights (consists of two variables in ESS)</span>
<span class="va">ess_health</span><span class="op">$</span><span class="va">svy_weight</span> <span class="op">&lt;-</span> <span class="va">ess_health</span><span class="op">$</span><span class="va">pspwght</span> <span class="op">*</span> <span class="va">ess_health</span><span class="op">$</span><span class="va">pweight</span>

<span class="va">ess_survey</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/as_survey.html">as_survey</a></span><span class="op">(</span><span class="va">ess_health</span>,
                        weights <span class="op">=</span> <span class="va">svy_weight</span><span class="op">)</span></code></pre></div>
</div>
<div id="create-scales" class="section level1">
<h1 class="hasAnchor">
<a href="#create-scales" class="anchor"></a>Create scales</h1>
<p>Let’s create scales for health behaviours and depressive symptoms, each including some reverse coding. For that, we need to pass the survey items (as well as any to be reversed) to the <code><a href="../reference/svy_make_scale.html">svy_make_scale()</a></code> function</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">depression_items</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fltdpr"</span>, <span class="st">"flteeff"</span>, <span class="st">"slprl"</span>, <span class="st">"wrhpp"</span>, <span class="st">"fltlnl"</span>, 
                 <span class="st">"enjlf"</span>, <span class="st">"fltsd"</span>, <span class="st">"cldgng"</span><span class="op">)</span>

  <span class="va">healthy_eating_items</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"etfruit"</span>, <span class="st">"eatveg"</span><span class="op">)</span>
  
  <span class="va">depression_reversed</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wrhpp"</span>, <span class="st">"enjlf"</span><span class="op">)</span></code></pre></div>
<p>Then, the <code><a href="../reference/svy_make_scale.html">svy_make_scale()</a></code> command can be used to <strong>calculate scale scores and display descriptives</strong>. It returns the survey object with the new variable added, so that you can use a pipeline to create multiple scales.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">ess_survey</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/svy_make_scale.html">svy_make_scale</a></span><span class="op">(</span><span class="va">ess_survey</span>, <span class="va">depression_items</span>, 
                             <span class="st">"depression"</span>, reversed <span class="op">=</span> <span class="va">depression_reversed</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/svy_make_scale.html">svy_make_scale</a></span><span class="op">(</span><span class="va">healthy_eating_items</span>, <span class="st">"healthy_eating"</span>, r_key <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt;     </span>
<span class="co">#&gt; Descriptives for depression scale:</span>
<span class="co">#&gt; Mean: 1.660  SD: 0.480</span>
<span class="co">#&gt; Cronbach's alpha: .79</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The following items were reverse coded (with min and max values):                        </span>
<span class="co">#&gt; wrhpp (1, 4)</span>
<span class="co">#&gt; enjlf (1, 4)</span></code></pre></div>
<p><img src="survey-functions_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code>#&gt;     
#&gt; Descriptives for healthy_eating scale:
#&gt; Mean: 4.931  SD: 1.131
#&gt; Cronbach's alpha: .66</code></pre>
<p><img src="survey-functions_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
</div>
<div id="report-correlations" class="section level1">
<h1 class="hasAnchor">
<a href="#report-correlations" class="anchor"></a>Report correlations</h1>
<p>You can use <code><a href="../reference/svy_cor_matrix.html">svy_cor_matrix()</a></code> to calculate weighted correlations, and then use <code><a href="../reference/report_cor_table.html">report_cor_table()</a></code> to present them nicely. To improve the calculation of confidence intervals, <code>n</code> should be specified as the weighted number of survey responses in that call.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ess_survey</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="http://gdfe.co/srvyr/reference/dplyr_single.html">select</a></span><span class="op">(</span><span class="va">agea</span>, <span class="va">health</span>, <span class="va">depression</span>, <span class="va">healthy_eating</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/svy_cor_matrix.html">svy_cor_matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/report_cor_table.html">report_cor_table</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_tally.html">survey_tally</a></span><span class="op">(</span><span class="va">ess_survey</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<div id="ghkxvydzwf" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: times, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ghkxvydzwf .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: none;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #FFFFFF;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ghkxvydzwf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ghkxvydzwf .gt_title {
  color: #333333;
  font-size: 12px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ghkxvydzwf .gt_subtitle {
  color: #333333;
  font-size: 12px;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ghkxvydzwf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
}

#ghkxvydzwf .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ghkxvydzwf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ghkxvydzwf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ghkxvydzwf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ghkxvydzwf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ghkxvydzwf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ghkxvydzwf .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ghkxvydzwf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ghkxvydzwf .gt_from_md > :first-child {
  margin-top: 0;
}

#ghkxvydzwf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ghkxvydzwf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ghkxvydzwf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ghkxvydzwf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ghkxvydzwf .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ghkxvydzwf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ghkxvydzwf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: none;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ghkxvydzwf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ghkxvydzwf .gt_table_body {
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
}

#ghkxvydzwf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ghkxvydzwf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ghkxvydzwf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ghkxvydzwf .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ghkxvydzwf .gt_left {
  text-align: left;
}

#ghkxvydzwf .gt_center {
  text-align: center;
}

#ghkxvydzwf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ghkxvydzwf .gt_font_normal {
  font-weight: normal;
}

#ghkxvydzwf .gt_font_bold {
  font-weight: bold;
}

#ghkxvydzwf .gt_font_italic {
  font-style: italic;
}

#ghkxvydzwf .gt_super {
  font-size: 65%;
}

#ghkxvydzwf .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="table gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><em>M (SD)</em></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">3</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol>
<li>agea</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>47.87 (18.98)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol start="2">
<li>health</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>2.23 (0.91)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.30 ***<br><span style="font-size:80%">[0.28, 0.31]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol start="3">
<li>depression</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>1.66 (0.48)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.05 **<br><span style="font-size:80%">[0.03, 0.06]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.41 ***<br><span style="font-size:80%">[0.40, 0.43]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol start="4">
<li>healthy_eating</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>4.93 (1.13)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.17 ***<br><span style="font-size:80%">[0.16, 0.19]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>-.09 ***<br><span style="font-size:80%">[-0.10, -0.07]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>-.11 ***<br><span style="font-size:80%">[-0.12, -0.09]</span></p>
</div></td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="5">
<em>M</em> and <em>SD</em> are used to represent mean and standard deviation, respectively. Values in square brackets indicate the 95% confidence interval for each correlation.</td>
    </tr>
<tr>
<td class="gt_sourcenote" colspan="5">† <em>p</em> &lt; .1, * <em>p</em> &lt; .05, ** <em>p</em> &lt; .01, *** <em>p</em> &lt; .001</td>
    </tr>
</tfoot>
</table>
</div>
<p>It is often helpful to use different variable names for display. For this, functions in the package typically accept rename tibbles that contain an <code>old</code> and a <code>new</code> column. By using the <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tibble::tribble</a></code> notation, they can be entered more cleanly that named character vectors, and the <code>get_rename_tribble()</code> helper function creates most of the code.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Use get_rename_tribbles to get most of this code</span>
<span class="va">var_renames</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
  <span class="op">~</span><span class="va">old</span>,             <span class="op">~</span><span class="va">new</span>,             
   <span class="st">"agea"</span>,           <span class="st">"Age"</span>,          
   <span class="st">"health"</span>,         <span class="st">"Poor health"</span>,        
   <span class="st">"depression"</span>,     <span class="st">"Depression"</span>,    
   <span class="st">"healthy_eating"</span>,  <span class="st">"Healthy eating"</span>
<span class="op">)</span>

<span class="co"># If var_names are provided, only variables included in that argument </span>
<span class="co"># are included in the correlation table</span>
<span class="va">ess_survey</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/svy_cor_matrix.html">svy_cor_matrix</a></span><span class="op">(</span>var_names <span class="op">=</span> <span class="va">var_renames</span><span class="op">)</span> <span class="op"><a href="http://gdfe.co/srvyr/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/report_cor_table.html">report_cor_table</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="http://gdfe.co/srvyr/reference/survey_tally.html">survey_tally</a></span><span class="op">(</span><span class="va">ess_survey</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<div id="snudhmavkp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: times, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#snudhmavkp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: none;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #FFFFFF;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#snudhmavkp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#snudhmavkp .gt_title {
  color: #333333;
  font-size: 12px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#snudhmavkp .gt_subtitle {
  color: #333333;
  font-size: 12px;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#snudhmavkp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
}

#snudhmavkp .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#snudhmavkp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#snudhmavkp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#snudhmavkp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#snudhmavkp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#snudhmavkp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#snudhmavkp .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#snudhmavkp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#snudhmavkp .gt_from_md > :first-child {
  margin-top: 0;
}

#snudhmavkp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#snudhmavkp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#snudhmavkp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#snudhmavkp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#snudhmavkp .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#snudhmavkp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#snudhmavkp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: none;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#snudhmavkp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#snudhmavkp .gt_table_body {
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #000000;
}

#snudhmavkp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#snudhmavkp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#snudhmavkp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#snudhmavkp .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#snudhmavkp .gt_left {
  text-align: left;
}

#snudhmavkp .gt_center {
  text-align: center;
}

#snudhmavkp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#snudhmavkp .gt_font_normal {
  font-weight: normal;
}

#snudhmavkp .gt_font_bold {
  font-weight: bold;
}

#snudhmavkp .gt_font_italic {
  font-style: italic;
}

#snudhmavkp .gt_super {
  font-size: 65%;
}

#snudhmavkp .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="table gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><em>M (SD)</em></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">2</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol>
<li>Age</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>47.87 (18.98)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol start="2">
<li>Poor health</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>2.23 (0.91)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.30 ***<br><span style="font-size:80%">[0.28, 0.31]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md"> <br>
</div></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md"><ol start="3">
<li>Depression</li>
</ol></div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>1.66 (0.48)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.05 ***<br><span style="font-size:80%">[0.03, 0.06]</span></p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>.41 ***<br><span style="font-size:80%">[0.40, 0.43]</span></p>
</div></td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes">
<tr>
<td class="gt_sourcenote" colspan="4">
<em>M</em> and <em>SD</em> are used to represent mean and standard deviation, respectively. Values in square brackets indicate the 95% confidence interval for each correlation.</td>
    </tr>
<tr>
<td class="gt_sourcenote" colspan="4">† <em>p</em> &lt; .1, * <em>p</em> &lt; .05, ** <em>p</em> &lt; .01, *** <em>p</em> &lt; .001</td>
    </tr>
</tfoot>
</table>
</div>
<p><em>For now, we cannot <code>add_distributions</code> to the correlation table while using survey weights.</em></p>
</div>
<div id="testing-significance-of-difference-between-two-groups" class="section level1">
<h1 class="hasAnchor">
<a href="#testing-significance-of-difference-between-two-groups" class="anchor"></a>Testing significance of difference between two groups</h1>
<p>Running a t-test on survey data is easy with <code><a href="https://rdrr.io/pkg/survey/man/svyttest.html">survey::svyttest()</a></code>. However, getting Cohen’s <em>d</em> as a measure of effect size, or subsetting to compare just two levels if there are more in the data is less trivial, and is where <code><a href="../reference/svy_cohen_d_pair.html">svy_cohen_d_pair()</a></code> comes in.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/svy_cohen_d_pair.html">svy_cohen_d_pair</a></span><span class="op">(</span><span class="va">ess_survey</span>, <span class="st">"health"</span>, <span class="st">"gndr"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 8</span>
<span class="co">#&gt;   pair       d      t    df  p.value mean_diff mean_diff_ci.low mean_diff_ci.hi…</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1 &amp; 2 -0.133 -0.120  7217  1.40e-6    -0.120          -0.0714           -0.169</span>
<span class="fu"><a href="../reference/svy_cohen_d_pair.html">svy_cohen_d_pair</a></span><span class="op">(</span><span class="va">ess_survey</span>, <span class="st">"health"</span>, <span class="st">"cntry"</span>, pair <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DE"</span>, <span class="st">"GB"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 8</span>
<span class="co">#&gt;   pair        d     t    df  p.value mean_diff mean_diff_ci.low mean_diff_ci.hi…</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt; 1 DE &amp; GB 0.324 0.295  5301 7.94e-25     0.295            0.351            0.239</span></code></pre></div>
</div>
<div id="running-pairwise-t-tests" class="section level1">
<h1 class="hasAnchor">
<a href="#running-pairwise-t-tests" class="anchor"></a>Running pairwise t-tests</h1>
<p><code><a href="../reference/svy_pairwise.t.test.html">svy_pairwise.t.test()</a></code> allows to run pairwise t-tests, e.g., as post-hoc comparisons, between multiple groups in the survey. <em>p</em>-values are adjusted for multiple comparisons, by default using the Holm-Bonferroni method.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/svy_pairwise.t.test.html">svy_pairwise.t.test</a></span><span class="op">(</span><span class="va">ess_survey</span>, <span class="st">"health"</span>, <span class="st">"cntry"</span>, cats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DE"</span>, <span class="st">"GB"</span>, <span class="st">"FR"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 8</span>
<span class="co">#&gt;   pair          d       t    df  p.value mean_diff mean_diff_ci.low</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt; 1 GB &amp; DE -0.324  -0.295   5301 2.38e-24   -0.295            -0.351</span>
<span class="co">#&gt; 2 FR &amp; DE -0.0956 -0.0849  4954 5.88e- 3   -0.0849           -0.145</span>
<span class="co">#&gt; 3 GB &amp; FR -0.233  -0.210   4177 3.16e-10   -0.210            -0.274</span>
<span class="co">#&gt; # … with 1 more variable: mean_diff_ci.high &lt;dbl&gt;</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lukas Wallrich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
