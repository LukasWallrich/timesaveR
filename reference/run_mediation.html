<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Conduct (parallel) mediation analysis — run_mediation • timesaveR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Conduct (parallel) mediation analysis — run_mediation"><meta property="og:description" content="Runs mediation analysis with one or more parallel mediators (using the lavaan
package). The results can then be plotted with plot_mediation()."><meta property="og:image" content="https://lukaswallrich.github.io/timesaveR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">timesaveR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting_started.html">Getting started with timesaveR</a>
    </li>
    <li>
      <a href="../articles/survey-functions.html">Analysing survey data with timesaveR</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/LukasWallrich/timesaveR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Conduct (parallel) mediation analysis</h1>
    <small class="dont-index">Source: <a href="https://github.com/LukasWallrich/timesaveR/blob/HEAD/R/med_mod_code.R" class="external-link"><code>R/med_mod_code.R</code></a></small>
    <div class="hidden name"><code>run_mediation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Runs mediation analysis with one or more parallel mediators (using the <code>lavaan</code>
package). The results can then be plotted with <code><a href="plot_mediation.html">plot_mediation()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_mediation</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">X</span>,</span>
<span>  <span class="va">Y</span>,</span>
<span>  <span class="va">Ms</span>,</span>
<span>  CVs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  standardized_all <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bootstraps <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>Data frame</p></dd>


<dt>X</dt>
<dd><p>Predictor variable (all variables should be passed 'bare' in tidyverse style)</p></dd>


<dt>Y</dt>
<dd><p>Outcome variable</p></dd>


<dt>Ms</dt>
<dd><p>Mediator variable(s)</p></dd>


<dt>CVs</dt>
<dd><p>Covariates (in predicting mediators <em>and</em> outcomes)</p></dd>


<dt>standardized_all</dt>
<dd><p>Logical. Should all coefficients (paths, direct and indirect effects) be standardized?</p></dd>


<dt>conf_level</dt>
<dd><p>The confidence level to be used for confidence intervals. Must be between 0 and 1
(exclusive), defaults to .95 (i.e. 95% confidence intervals).</p></dd>


<dt>seed</dt>
<dd><p>Random seed. You should set this to get reproducible results.</p></dd>


<dt>bootstraps</dt>
<dd><p>Number of bootstraps, defaults to 5000.</p></dd>


<dt>...</dt>
<dd><p>Options passed on to <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Tibble with direct, total and indirect effects, based on bootstrap resamples. In addition, 'a' coefficients for paths from
X to mediators and 'b' coefficients for paths from mediators to Y are returned. Coefficients for covariates
are returned as an attribute - see the example.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Note that covariates (if given) are used in predicting each mediator and the outcome. The
coefficients for covariates are returned as an attribute to the main results,
given that they are not always reported. To access them, use <code>attr(res, "CV_coefficients")</code>
if you have saved the return of this function in <code>res</code>. The lavaan code to estimate the model is
also returned as an attribute, access it with <code>attr(res, "lavaan_code")</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Might the link between depression and self-reported health be partly explained</span></span></span>
<span class="r-in"><span><span class="co"># by reductions in physical activity level, when holding age constant?</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">4321</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">run_mediation</span><span class="op">(</span><span class="va">ess_health</span>, <span class="va">fltdpr</span>, <span class="va">health</span>, <span class="va">dosprt</span>, <span class="va">agea</span>, bootstraps <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> </span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Due to a bug in lavaan, run_mediation might not currently be stable - see https://github.com/yrosseel/lavaan/issues/275.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>             Specify missing = "listwise" or estimator = "ML" as a workaround</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>lavaan WARNING: some cases are empty and will be ignored:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   1588</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>lavaan WARNING: 28 bootstrap runs failed or did not converge.</span>
<span class="r-in"><span> <span class="co"># Note that high number of bootstraps fails - in that case, CIs might not be reliable - </span></span></span>
<span class="r-in"><span> <span class="co"># this is likely due to the limited range of the variables here</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="va">res</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type     mediator     est      se pvalue ci.lower ci.upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> a        dosprt   -<span style="color: #BB0000;">0.087</span><span style="color: #BB0000; text-decoration: underline;">0</span> 0.012<span style="text-decoration: underline;">2</span>       0 -<span style="color: #BB0000;">0.107</span>    -<span style="color: #BB0000;">0.062</span><span style="color: #BB0000; text-decoration: underline;">6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> b        dosprt   -<span style="color: #BB0000;">0.149</span>  0.009<span style="text-decoration: underline;">70</span>      0 -<span style="color: #BB0000;">0.169</span>    -<span style="color: #BB0000;">0.134</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> direct   <span style="color: #BB0000;">NA</span>        0.284  0.012<span style="text-decoration: underline;">0</span>       0  0.264     0.303 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> indirect dosprt    0.013<span style="text-decoration: underline;">0</span> 0.002<span style="text-decoration: underline;">09</span>      0  0.009<span style="text-decoration: underline;">33</span>   0.016<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> total    <span style="color: #BB0000;">NA</span>        0.297  0.011<span style="text-decoration: underline;">9</span>       0  0.277     0.315 </span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"CV_coefficients"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   DV          CV        est     se pvalue ci.lower ci.upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> dosprt.agea <span style="color: #BB0000;">NA</span>    -<span style="color: #BB0000;">0.039</span><span style="color: #BB0000; text-decoration: underline;">5</span> 0.011<span style="text-decoration: underline;">7</span>      0  -<span style="color: #BB0000;">0.059</span><span style="color: #BB0000; text-decoration: underline;">1</span>  -<span style="color: #BB0000;">0.021</span><span style="color: #BB0000; text-decoration: underline;">2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> health.agea <span style="color: #BB0000;">NA</span>     0.276  0.013<span style="text-decoration: underline;">2</span>      0   0.254    0.300 </span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># NB: bootstraps = 50 only set to reduce running time - should be 1000+</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lukas Wallrich.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

